<div class="page-header">
  <h1>Offers</h1>
</div>

<%= render "layouts/flash_notice" %>

<div class="pull-right">
  <%= link_to new_offer_path, class: ["btn", "btn-default"] do %>
    <span class="glyphicon glyphicon-plus-sign"></span>
    New
  <% end %>

  <%= link_to "", class: ["btn", "btn-primary", "btn-upload"] do %>
    <span class="glyphicon glyphicon-upload"></span>
    Upload TSV
  <% end %>

  <%= link_to destroy_all_offers_path, class: ["btn", "btn-danger"], method: "delete", confirm: "Are you sure?" do %>
    <span class="glyphicon glyphicon-trash"></span>
    Delete All
  <% end %>
</div>

<%= form_tag({ action: "upload" }, id: "form-upload", class: "hide", multipart: true) do %>
  <%= file_field_tag "file" %>
  <%= submit_tag %>
<% end %>

<% if @offers.empty? %>
  <p>There are no offers</p>
<% else %>
  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Business name</th>
        <th>Address</th>
        <th>Postal code</th>
        <th>Latitude</th>
        <th>Longitude</th>
        <th>Radius</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @offers.each do |offer| %>
        <tr>
          <td><%= offer.business_name %></td>
          <td><%= offer.address %></td>
          <td><%= offer.full_postal_code %></td>
          <td><%= offer.latitude %></td>
          <td><%= offer.longitude %></td>
          <td><%= offer.radius %></td>
          <td>
            <div class="btn-group">
              <%= link_to offer, class: ["btn", "btn-default", "btn-sm"], title: "Show" do %>
                <span class="glyphicon glyphicon-eye-open"></span>
              <% end %>
              <%= link_to edit_offer_path(offer), class: ["btn", "btn-default", "btn-sm"], title: "Edit" do %>
                <span class="glyphicon glyphicon-edit"></span>
              <% end %>
              <%= link_to offer, class: ["btn", "btn-default", "btn-sm"], title: "Destroy",
                                 method: :delete, data: { confirm: 'Are you sure?' } do %>
                <span class="glyphicon glyphicon-trash"></span>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
